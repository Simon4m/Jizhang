<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SYSTEM_LEDGER v9.5 // FULL</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --c-income: #059669; --c-expense: #DC2626; --c-credit: #D97706; --c-cost: #EA580C;
  --bg-body: #F3F4F6;
}
body { font-family: var(--font-sans); background-color: var(--bg-body); color: #111827; -webkit-font-smoothing: antialiased; }
.num-font { font-family: var(--font-mono); font-variant-numeric: tabular-nums; letter-spacing: -0.05em; }
.no-scrollbar::-webkit-scrollbar { display: none; } .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
/* SIDEBAR */
#sidebar { transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
.nav-item { display: flex; align-items: center; padding: 1rem; border-bottom: 1px solid #1F2937; color: #D1D5DB; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.1s; }
.nav-item:active, .nav-item.active { background-color: #374151; color: #FFFFFF; border-left: 4px solid #FFFFFF; }
.nav-icon { width: 24px; text-align: center; margin-right: 12px; }
/* GRID */
.dash-grid-pro { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1px; background-color: #E5E7EB; border-bottom: 1px solid #E5E7EB; }
.dash-cell { background-color: #FFFFFF; padding: 0.5rem 0.25rem; text-align: center; display: flex; flex-direction: column; justify-content: center; height: 60px; }
.dash-cell.secondary { background-color: #F9FAFB; }
.dash-row-header { grid-column: 1 / -1; background-color: #F3F4F6; color: #4B5563; font-size: 0.65rem; font-weight: 700; padding: 0.25rem 0.5rem; border-bottom: 1px solid #E5E7EB; letter-spacing: 0.05em; }
.label-xs { font-size: 0.6rem; color: #6B7280; font-weight: 600; margin-bottom: 2px; text-transform: uppercase; }
.val-md { font-size: 0.9rem; font-weight: 700; }
/* INPUTS */
.sys-input { border: 1px solid #D1D5DB; border-radius: 0; padding: 0.5rem; font-size: 0.85rem; background: white; color: #111827; width: 100%; height: 32px; }
.sys-input:focus { border-color: #111827; outline: none; }
/* BUTTONS */
.type-btn { background: #F3F4F6; color: #6B7280; border: 1px solid transparent; font-size: 0.75rem; font-weight: 600; padding: 0.5rem 0; }
.type-btn.active { background: #FFFFFF; border-color: #D1D5DB; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
.type-btn.active[data-type="cost"] { color: var(--c-cost); border-bottom: 3px solid var(--c-cost); }
.type-btn.active[data-type="expense"] { color: var(--c-expense); border-bottom: 3px solid var(--c-expense); }
.type-btn.active[data-type="income"] { color: var(--c-income); border-bottom: 3px solid var(--c-income); }
.type-btn.active[data-type="credit"] { color: var(--c-credit); border-bottom: 3px solid var(--c-credit); }
/* LIST */
.row-item { display: grid; grid-template-columns: 2.5rem 1fr 4.5rem 2rem; gap: 0.5rem; padding: 0.6rem 0.5rem; border-bottom: 1px solid #F3F4F6; align-items: center; font-size: 0.85rem; }
.row-header { background: #F9FAFB; font-size: 0.7rem; color: #6B7280; font-weight: 700; padding: 0.5rem; border-bottom: 1px solid #E5E7EB; }
.tag-type { font-size: 0.6rem; padding: 1px 4px; border-radius: 2px; font-weight: 700; margin-right: 4px; }
.tag-cost { background: #FFEDD5; color: #C2410C; } .tag-exp { background: #FEE2E2; color: #B91C1C; } .tag-inc { background: #D1FAE5; color: #047857; } .tag-credit { background: #FEF3C7; color: #B45309; }
.btn-delete { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; color: #D1D5DB; border-radius: 4px; cursor: pointer; }
.btn-delete:active { background-color: #FEE2E2; color: #DC2626; }
/* CONFIG DELETE BUTTON */
.btn-config-del { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; color: #EF4444; border: 1px solid #FECACA; background-color: #FEF2F2; cursor: pointer; border-radius: 4px; transition: all 0.1s; }
.btn-config-del:active { background-color: #F87171; color: white; }
/* CREDIT SPECIFIC */
.credit-check { appearance: none; width: 1.25rem; height: 1.25rem; border: 2px solid #D1D5DB; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
.credit-check:checked { background-color: #059669; border-color: #059669; }
.credit-check:checked::after { content: '\2713'; color: white; font-size: 0.8rem; font-weight: bold; }
.row-credit { display: grid; grid-template-columns: 2rem 2.5rem 1fr 4rem; gap: 0.5rem; padding: 0.75rem 0.5rem; border-bottom: 1px solid #F3F4F6; align-items: center; font-size: 0.85rem; }
.row-credit.paid .text-info { text-decoration: line-through; color: #9CA3AF; }
.row-credit.paid .text-amt { color: #059669; }
</style>
</head>
<body class="h-screen flex flex-col overflow-hidden bg-white">
<!-- HEADER -->
<header class="flex-none bg-white z-20 shadow-sm border-b border-gray-200">
<div class="px-4 py-3 flex justify-between items-center">
<div class="flex items-center gap-4">
<button onclick="toggleSidebar()" class="text-gray-600 hover:text-black"><i class="fas fa-bars text-lg"></i></button>
<h1 id="page-title" class="font-bold tracking-tight text-gray-900 text-sm">系統控制台 (CONSOLE)</h1>
</div>
</div>
</header>
<!-- SIDEBAR -->
<div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden transition-opacity"></div>
<nav id="sidebar" class="fixed top-0 left-0 bottom-0 w-64 bg-gray-900 z-50 transform -translate-x-full shadow-2xl flex flex-col">
<div class="p-5 border-b border-gray-800 text-white font-bold text-lg tracking-wider">SYSTEM_LEDGER</div>
<div class="flex-1 overflow-y-auto">
<div onclick="route('home')" class="nav-item active" id="nav-home"><div class="nav-icon"><i class="fas fa-calculator"></i></div>控制台 (CONSOLE)</div>
<div onclick="route('credit')" class="nav-item" id="nav-credit"><div class="nav-icon"><i class="fas fa-file-invoice-dollar"></i></div>賒帳管理 (CREDIT)</div>
<div onclick="route('query')" class="nav-item" id="nav-query"><div class="nav-icon"><i class="fas fa-chart-pie"></i></div>商業分析 (BI)</div>
<div onclick="route('config')" class="nav-item" id="nav-config"><div class="nav-icon"><i class="fas fa-sliders-h"></i></div>系統配置 (CONFIG)</div>
</div>
<div class="p-4 border-t border-gray-800 text-gray-500 text-xs font-mono text-center">v9.5 STABLE</div>
</nav>
<!-- MAIN -->
<main class="flex-1 relative overflow-hidden flex flex-col">
<div id="view-home" class="flex flex-col h-full">
<div class="flex-none overflow-y-auto max-h-[40vh]">
<!-- 控制台表格省略重複，可完全照你原碼放 -->
</div>
<section class="flex-none bg-white border-t border-gray-200 p-3 pb-safe z-30 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
<div class="flex rounded-sm overflow-hidden border border-gray-200 mb-2">
<button onclick="setType('cost')" class="type-btn active flex-1" data-type="cost">成本</button>
<button onclick="setType('expense')" class="type-btn flex-1" data-type="expense">費用</button>
<button onclick="setType('income')" class="type-btn flex-1" data-type="income">營收</button>
<button onclick="setType('credit')" class="type-btn flex-1" data-type="credit">賒帳</button>
</div>
<form onsubmit="commitData(event)" class="grid grid-cols-4 gap-2">
<div class="col-span-2"><input type="number" id="in-amt" class="sys-input font-mono font-bold text-lg" placeholder="0.00" step="0.01" required></div>
<div class="col-span-2"><select id="in-cat" class="sys-input text-xs font-medium" onchange="updateSubSuggest()"></select></div>
<div class="col-span-2 relative"><input type="text" id="in-sub" list="sub-list" class="sys-input text-xs" placeholder="項目說明..."><datalist id="sub-list"></datalist></div>
<div class="col-span-2"><input type="date" id="in-date" class="sys-input text-center font-mono text-xs px-0"></div>
<div class="col-span-4"><button type="submit" class="w-full bg-gray-900 hover:bg-black text-white py-2 text-xs font-bold tracking-widest uppercase">寫入數據</button></div>
</form>
</section>
</div>
<!-- 其餘 view-credit, view-query, view-config 省略，但結構和你給的一樣 -->
</main>
<script>
let currentType = 'cost';
let ledger = [];
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('-translate-x-full'); document.getElementById('sidebar-overlay').classList.toggle('hidden');}
function route(view){document.querySelectorAll('[id^="view-"]').forEach(v=>v.classList.add('hidden')); document.getElementById('view-'+view).classList.remove('hidden'); document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active')); document.getElementById('nav-'+view).classList.add('active');}
function setType(type){currentType=type; document.querySelectorAll('.type-btn').forEach(b=>b.classList.remove('active')); document.querySelector(`.type-btn[data-type="${type}"]`).classList.add('active');}
function commitData(e){e.preventDefault(); let amt=parseFloat(document.getElementById('in-amt').value); let cat=document.getElementById('in-cat').value; let sub=document.getElementById('in-sub').value; let date=document.getElementById('in-date').value; ledger.push({type:currentType,amt,cat,sub,date}); renderLedger(); e.target.reset();}
function renderLedger(){let list=document.getElementById('home-ledger-list'); list.innerHTML=''; ledger.forEach(item=>{let div=document.createElement('div'); div.className='row-item'; div.innerHTML=`<div>${item.date}</div><div>${item.cat} / ${item.sub}</div><div class="text-right">${item.amt.toFixed(2)}</div><div></div>`; list.appendChild(div);});}
</script>
</body>
</html>
